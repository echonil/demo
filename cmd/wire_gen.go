// Code generated by Wire. DO NOT EDIT.

//go:generate wire
//+build !wireinject

package cmd

import (
	controllers3 "github.com/clevergo/demo/internal/api/controllers"
	controllers2 "github.com/clevergo/demo/internal/backend/controllers"
	"github.com/clevergo/demo/internal/frontend/controllers"
	"github.com/clevergo/demo/internal/web"
	"github.com/clevergo/demo/pkg/access"
	"github.com/google/wire"

	_ "github.com/go-sql-driver/mysql"

	_ "github.com/golang-migrate/migrate/v4/source/file"
)

// Injectors from wire.go:

func initializeServer() (*web.Server, func(), error) {
	logger, cleanup, err := provideLogger()
	if err != nil {
		return nil, nil, err
	}
	db, cleanup2, err := provideDB()
	if err != nil {
		cleanup()
		return nil, nil, err
	}
	viewManager := provideView()
	store := provideSessionStore()
	sessionManager := provideSessionManager(store)
	identityStore := provideIdentityStore(db)
	manager := provideUserManager(identityStore, sessionManager)
	dialer := provideMailer()
	captchasManager := provideCaptchaManager()
	enforcer, err := provideEnforcer()
	if err != nil {
		cleanup2()
		cleanup()
		return nil, nil, err
	}
	accessManager := access.New(enforcer, manager)
	application := provideApp(logger, db, viewManager, sessionManager, manager, dialer, captchasManager, accessManager)
	site := controllers.NewSite(application)
	user := controllers.NewUser(application)
	cmdFrontendRoutes := provideFrontendRoutes(site, user)
	backendView := provideBackendView(logger)
	backendApplication := provideBackendApp(logger, db, backendView, sessionManager, manager, dialer, captchasManager, accessManager)
	controllersSite := controllers2.NewSite(backendApplication)
	post := controllers2.NewPost(backendApplication)
	controllersUser := controllers2.NewUser(backendApplication)
	cmdBackendRoutes := provideBackendRoutes(accessManager, controllersSite, post, controllersUser)
	apiApplication := provideAPIApp(logger, db, viewManager, sessionManager, manager, dialer, captchasManager, accessManager)
	controllersPost := controllers3.NewPost(apiApplication)
	user2 := controllers3.NewUser(apiApplication)
	cmdApiRoutes := provideAPIRoutes(accessManager, controllersPost, user2)
	router := provideRouter(application, cmdFrontendRoutes, backendApplication, cmdBackendRoutes, apiApplication, cmdApiRoutes)
	translators, err := provideI18N()
	if err != nil {
		cleanup2()
		cleanup()
		return nil, nil, err
	}
	v, err := provideMiddlewares(sessionManager, translators, manager)
	if err != nil {
		cleanup2()
		cleanup()
		return nil, nil, err
	}
	server := provideServer(router, logger, v)
	return server, func() {
		cleanup2()
		cleanup()
	}, nil
}

// wire.go:

var superSet = wire.NewSet(
	provideServer, provideRouter, provideMiddlewares, provideI18N,
	provideLogger, provideDB, provideSessionManager, provideSessionStore, provideUserManager,
	provideIdentityStore, provideMailer, provideCaptchaManager,
	provideEnforcer, access.New,
)
